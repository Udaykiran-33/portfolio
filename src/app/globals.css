@import "tailwindcss";

/* Class-based dark mode for Tailwind v4 */
@custom-variant dark (&:where(.dark, .dark *));

@theme inline {
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);

  --animate-marquee: marquee var(--duration, 40s) linear infinite;

  @keyframes marquee {
    from { transform: translateX(0); }
    to { transform: translateX(calc(-100% - var(--marquee-gap))); }
  }
}

/* ─── Light mode (default) — 12-level gray scale ─── */
:root {
  --radius: 0.625rem;
  --gray-1:  oklch(0.985 0 0);
  --gray-2:  oklch(0.960 0 0);
  --gray-3:  oklch(0.930 0 0);
  --gray-4:  oklch(0.895 0 0);
  --gray-5:  oklch(0.845 0 0);
  --gray-6:  oklch(0.770 0 0);
  --gray-7:  oklch(0.690 0 0);
  --gray-8:  oklch(0.590 0 0);
  --gray-9:  oklch(0.490 0 0);
  --gray-10: oklch(0.395 0 0);
  --gray-11: oklch(0.270 0 0);
  --gray-12: oklch(0.130 0 0);

  /* Semantic tokens mapped to gray scale */
  --background: var(--gray-1);
  --foreground: var(--gray-12);
  --card: var(--gray-2);
  --card-foreground: var(--gray-12);
  --primary: var(--gray-12);
  --primary-foreground: var(--gray-1);
  --secondary: var(--gray-4);
  --secondary-foreground: var(--gray-12);
  --muted: var(--gray-3);
  --muted-foreground: var(--gray-9);
  --accent: var(--gray-3);
  --accent-foreground: var(--gray-12);
  --border: var(--gray-3);
  --input: var(--gray-4);
  --ring: var(--gray-8);

  /* Motion tokens */
  --ease-snappy: cubic-bezier(0.2, 0.8, 0.2, 1);
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;

  /* Component glow tokens (light mode: dark glows) */
  --spotlight-fill: oklch(0 0 0 / 5%);
  --spotlight-border: oklch(0 0 0 / 10%);
  --cursor-glow-color: oklch(0 0 0 / 3%);
}

/* ─── Dark mode — inverted 12-level gray scale ─── */
.dark {
  --gray-1:  oklch(0.110 0 0);
  --gray-2:  oklch(0.130 0 0);
  --gray-3:  oklch(0.160 0 0);
  --gray-4:  oklch(0.190 0 0);
  --gray-5:  oklch(0.230 0 0);
  --gray-6:  oklch(0.320 0 0);
  --gray-7:  oklch(0.400 0 0);
  --gray-8:  oklch(0.490 0 0);
  --gray-9:  oklch(0.580 0 0);
  --gray-10: oklch(0.670 0 0);
  --gray-11: oklch(0.780 0 0);
  --gray-12: oklch(0.930 0 0);

  /* Component glow tokens (dark mode: light glows) */
  --spotlight-fill: oklch(1 0 0 / 4%);
  --spotlight-border: oklch(1 0 0 / 10%);
  --cursor-glow-color: oklch(1 0 0 / 4%);
}

/* ─── View Transitions for theme toggle ─── */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}
::view-transition-new(root) {
  z-index: 1;
}
::view-transition-old(root) {
  z-index: -1;
}

/* ─── Living Cards: animated border angle for rotating glow ─── */
@property --border-angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

/* ─── Living Cards: organic breathing shapes ─── */
.living-card {
  will-change: border-radius;
  backface-visibility: hidden;
}

.living-card-0 { animation: breathe-0 14s ease-in-out infinite; }
.living-card-1 { animation: breathe-1 14s ease-in-out infinite; animation-delay: -4.7s; }
.living-card-2 { animation: breathe-2 14s ease-in-out infinite; animation-delay: -9.3s; }

/* Three distinct organic shape cycles — each card has a unique personality */
@keyframes breathe-0 {
  0%, 100% { border-radius: 18% 28% 24% 20% / 22% 18% 28% 22%; }
  50%      { border-radius: 24% 20% 18% 28% / 20% 24% 20% 28%; }
}
@keyframes breathe-1 {
  0%, 100% { border-radius: 24% 20% 28% 18% / 28% 22% 18% 24%; }
  50%      { border-radius: 20% 28% 22% 24% / 18% 28% 24% 18%; }
}
@keyframes breathe-2 {
  0%, 100% { border-radius: 28% 18% 20% 24% / 24% 28% 22% 18%; }
  50%      { border-radius: 18% 24% 28% 20% / 28% 18% 24% 22%; }
}

.glow-border-spin {
  animation: spin-border 4s linear infinite;
}
@keyframes spin-border {
  to { --border-angle: 360deg; }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    -webkit-text-size-adjust: 100%;
  }
  ::selection {
    background: var(--gray-5);
  }
}

/* Mobile-specific improvements */
@media (max-width: 768px) {
  /* Prevent horizontal scroll on mobile */
  html, body {
    overflow-x: hidden;
    width: 100%;
  }
  
  /* Better touch target sizes for mobile */
  a, button {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Smooth scrolling for mobile */
  html {
    scroll-behavior: smooth;
  }
  
  /* Prevent text size adjustment on orientation change */
  html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}

/* Disable hover effects on touch devices */
@media (hover: none) and (pointer: coarse) {
  .hover\:scale-105:hover {
    transform: none;
  }
}
